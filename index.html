<!DOCTYPE html>
<head>
  <title>Aeroport</title>
  <link rel='stylesheet' href='styles.css' />
  <script src="jquery.js"></script>
  
  <script>
    //fonction jquery qui s'execute quand la page load
     $(document).ready(function() {

       //requete au serveur python
        $.ajax({url : 'http://localhost:8080/',
          type: 'GET',
          dataType: 'json',
          crossDomain: true, 
          success: function (data) {
            $.each(data, function (index, value) {

              //modification des dates
              var date = value['time'];
              date = new Date(date);
              var arrivalTime = date.getHours() + ":" +(date.getMinutes()<10?'0':'') + date.getMinutes();

              //hack for alternating row colors
              backgroundCss = '';
              if(index % 2 > 0){
                backgroundCss = 'lightBlue';
              }

              $(".container-fluid").append(' \
                  <div class="table-row items ' + backgroundCss + '"> \
                    <div class="text">' + value['destination'] + '</div> \
                    <div class="text">' + value['carrier'] + '</div> \
                    <div class="text">' + value['flight'] + '</div> \
                    <div class="text">' + value['gate'] + '</div> \
                    <div class="text">' + arrivalTime + '</div> \
                  <div class="text on-time ' + value['class'] + '">' + value['status'] + '</div> \
                </div>')
            });

          }
      });
     });
  </script>
</head>

<body>
  <div class="container-fluid">
    <div class="table-row title">Departures</div>
    <div class="table-row header">
      <div class="text">Destination</div>
      <div class="text">Carrier</div>
      <div class="text">Flight</div>
      <div class="text">Gate</div>
      <div class="text">Time</div>
      <div class="text">Status</div>
    </div>
  </div>
</body>
</html>
